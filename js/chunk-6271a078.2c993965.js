(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6271a078"],{"07ac":function(t,n,e){var a=e("23e7"),i=e("6f53").values;a({target:"Object",stat:!0},{values:function(t){return i(t)}})},2819:function(t,n,e){"use strict";e.r(n);var a=function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",{staticClass:"song limit"},[e("div",{staticClass:"title"},[e("div",{staticClass:"all-tag",on:{click:t.openTags}},[t._v(" 全部 "),e("i",{staticClass:"icon el-icon-arrow-down"}),e("transition",{attrs:{name:"fate"}},[t.showTags?e("div",{staticClass:"tags"},t._l(t.sorted,(function(n){return e("div",{key:n.category,staticClass:"item"},[e("h2",[e("i",{staticClass:"iconfont",class:n.icon}),t._v(t._s(n.type))]),e("ul",t._l(n.list,(function(n){return e("li",{key:n.name,class:{active:t.currentTag===n.name},on:{click:function(e){return t.shooseCat(n.name)}}},[t._v(t._s(n.name))])})),0)])})),0):t._e()])],1),e("div",{staticClass:"hot-tags"},[e("div",{staticClass:"hot-title"},[t._v(" 热门标签 ： "),e("ul",{staticClass:"item"},t._l(t.hotTags,(function(n){return e("li",{key:n.id,class:{active:t.currentTag===n.name},on:{click:function(e){return t.shooseCat(n.name)}}},[t._v(t._s(n.name))])})),0)])]),e("div",{staticClass:"type-tag"},[e("div",{staticClass:"hot",on:{click:function(n){return t.chooseType("hot")}}},[e("span",{class:{active:"hot"===t.sortType}},[t._v("热门")])]),e("div",{staticClass:"new",on:{click:function(n){return t.chooseType("new")}}},[e("span",{class:{active:"new"===t.sortType}},[t._v("最新")])])])]),e("song-sheet",{attrs:{songSheet:t.allSongSheet}}),e("el-pagination",{staticClass:"asd",attrs:{"current-page":t.currentPage,"page-size":t.limit,layout:"total, prev, pager, next",total:t.total},on:{"current-change":t.handleCurrentChange,"update:currentPage":function(n){t.currentPage=n},"update:current-page":function(n){t.currentPage=n}}}),e("loading",{directives:[{name:"show",rawName:"v-show",value:t.isLoading,expression:"isLoading"}]})],1)},i=[],s=(e("4160"),e("07ac"),e("4c53"),e("159b"),e("81f4")),o=e("f350");function r(){return Object(o["a"])({url:"/playlist/catlist"})}function c(){return Object(o["a"])({url:"/playlist/hot"})}function u(t){return Object(o["a"])({url:"/top/playlist",params:{order:t.order,cat:t.cat,limit:t.limit,offset:t.offset}})}var l={components:{songSheet:s["a"]},data:function(){return{hotTags:[],showTags:!1,isLoading:!0,typeList:[{key:0,value:"语种",icon:"icon-yuzhong"},{key:1,value:"风格",icon:"icon-fengge"},{key:2,value:"场景",icon:"icon-changjing"},{key:3,value:"情感",icon:"icon-qinggan"},{key:4,value:"主题",icon:"icon-zhuti"}],sorted:[],allSongSheet:[],total:0,sortType:"hot",limit:45,offset:0,currentTag:"全部",currentPage:0}},created:function(){this.init()},methods:{init:function(){this.getTopCatlist(),this.getCatlist(),this.getHotCatlist()},getTopCatlist:function(){var t=this,n={order:this.sortType,cat:this.currentTag,limit:this.limit,offset:this.offset};u(n).then((function(n){t.allSongSheet=n.data.playlists,t.total=n.data.total,console.log(t.allSongSheet),t.isLoading=!1}))},getCatlist:function(){var t=this;r().then((function(n){t.sorted=t.groupBy(n.data.sub,(function(t){return t.category}))}))},getHotCatlist:function(){var t=this;c().then((function(n){t.hotTags=n.data.tags,t.isLoading=!1}))},groupBy:function(t,n){var e=this,a={};t.forEach((function(t){var e=n(t);a[e]=a[e]||[],a[e].push(t)}));var i=[],s=function(t){var n="",s="",o="";e.typeList.forEach((function(e){e.key==t&&(n=e.value,s=e.key,o=e.icon)})),i.push({type:n,category:s,icon:o,list:a[t]})};for(var o in a)s(o);return Object.values(i)},openTags:function(){this.showTags=!this.showTags},chooseType:function(t){this.sortType=t,this.getTopCatlist()},shooseCat:function(t){this.currentTag=t,this.getTopCatlist()},handleCurrentChange:function(t){this.offset=(t-1)*this.limit,this.currentPage=t,this.getTopCatlist()}}},f=l,g=(e("6857"),e("2877")),h=Object(g["a"])(f,a,i,!1,null,"1ba4b212",null);n["default"]=h.exports},"2a14":function(t,n,e){},"324c":function(t,n,e){t.exports=e.p+"img/erji.f9e4f869.svg"},"3a3b":function(t,n,e){},"4c53":function(t,n,e){"use strict";var a=e("23e7"),i=e("857a"),s=e("af03");a({target:"String",proto:!0,forced:s("sub")},{sub:function(){return i(this,"sub","","")}})},6857:function(t,n,e){"use strict";var a=e("2a14"),i=e.n(a);i.a},"6f53":function(t,n,e){var a=e("83ab"),i=e("df75"),s=e("fc6a"),o=e("d1e7").f,r=function(t){return function(n){var e,r=s(n),c=i(r),u=c.length,l=0,f=[];while(u>l)e=c[l++],a&&!o.call(r,e)||f.push(t?[e,r[e]]:r[e]);return f}};t.exports={entries:r(!0),values:r(!1)}},"7a42":function(t,n,e){"use strict";var a=e("3a3b"),i=e.n(a);i.a},"81f4":function(t,n,e){"use strict";var a=function(){var t=this,n=t.$createElement,a=t._self._c||n;return t.songSheet?a("div",{staticClass:"song"},t._l(t.songSheet,(function(n){return a("div",{key:n.id,staticClass:"list ",on:{click:function(e){return t.toDetail(n.id)}}},[a("img",{attrs:{src:n.picUrl||n.coverImgUrl,alt:""}}),a("div",{staticClass:"ellipsis-two "},[t._v(t._s(n.name))]),a("div",{staticClass:"icon"},[a("img",{attrs:{src:e("324c"),alt:""}}),t._v(t._s(n.playCount?n.playCount:n.type))])])})),0):t._e()},i=[],s={props:["songSheet"],methods:{toDetail:function(t){this.$router.push({path:"/playlistdetail",query:{id:t}})}}},o=s,r=(e("7a42"),e("2877")),c=Object(r["a"])(o,a,i,!1,null,"3098830e",null);n["a"]=c.exports},"857a":function(t,n,e){var a=e("1d80"),i=/"/g;t.exports=function(t,n,e,s){var o=String(a(t)),r="<"+n;return""!==e&&(r+=" "+e+'="'+String(s).replace(i,"&quot;")+'"'),r+">"+o+"</"+n+">"}},af03:function(t,n,e){var a=e("d039");t.exports=function(t){return a((function(){var n=""[t]('"');return n!==n.toLowerCase()||n.split('"').length>3}))}}}]);
//# sourceMappingURL=chunk-6271a078.2c993965.js.map